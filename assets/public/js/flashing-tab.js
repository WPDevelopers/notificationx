!function(){"use strict";var e=function(e){return e.reduce((function(e,t){return 2*e+t}),0)},t=function(e){for(var t=[],n=7;n>=0;n--)t.push(!!(e&1<<n));return t},n=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},i=function(n,i){i||(i={});var r=function(e){for(var t=[],i=0;i<e;i++)t.push(n.readBytes(3));return t},a=function(){var e,t;t="";do{e=n.readByte(),t+=n.read(e)}while(0!==e);return t};!function(){var a={};if(a.sig=n.read(3),a.ver=n.read(3),"GIF"!==a.sig)throw new Error("Not a GIF file.");a.width=n.readUnsigned(),a.height=n.readUnsigned();var o=t(n.readByte());a.gctFlag=o.shift(),a.colorRes=e(o.splice(0,3)),a.sorted=o.shift(),a.gctSize=e(o.splice(0,3)),a.bgColor=n.readByte(),a.pixelAspectRatio=n.readByte(),a.gctFlag&&(a.gct=r(1<<a.gctSize+1)),i.hdr&&i.hdr(a)}(),setTimeout((function o(){var s={};switch(s.sentinel=n.readByte(),String.fromCharCode(s.sentinel)){case"!":s.type="ext",function(r){switch(r.label=n.readByte(),r.label){case 249:r.extType="gce",function(r){n.readByte();var a=t(n.readByte());r.reserved=a.splice(0,3),r.disposalMethod=e(a.splice(0,3)),r.userInput=a.shift(),r.transparencyGiven=a.shift(),r.delayTime=n.readUnsigned(),r.transparencyIndex=n.readByte(),r.terminator=n.readByte(),i.gce&&i.gce(r)}(r);break;case 254:r.extType="com",function(e){e.comment=a(),i.com&&i.com(e)}(r);break;case 1:r.extType="pte",function(e){n.readByte(),e.ptHeader=n.readBytes(12),e.ptData=a(),i.pte&&i.pte(e)}(r);break;case 255:r.extType="app",function(e){n.readByte(),e.identifier=n.read(8),e.authCode=n.read(3),"NETSCAPE"===e.identifier?function(e){n.readByte(),e.unknown=n.readByte(),e.iterations=n.readUnsigned(),e.terminator=n.readByte(),i.app&&i.app.NETSCAPE&&i.app.NETSCAPE(e)}(e):function(e){e.appData=a(),i.app&&i.app[e.identifier]&&i.app[e.identifier](e)}(e)}(r);break;default:r.extType="unknown",function(e){e.data=a(),i.unknown&&i.unknown(e)}(r)}}(s);break;case",":s.type="img",function(o){o.leftPos=n.readUnsigned(),o.topPos=n.readUnsigned(),o.width=n.readUnsigned(),o.height=n.readUnsigned();var s=t(n.readByte());o.lctFlag=s.shift(),o.interlaced=s.shift(),o.sorted=s.shift(),o.reserved=s.splice(0,2),o.lctSize=e(s.splice(0,3)),o.lctFlag&&(o.lct=r(1<<o.lctSize+1)),o.lzwMinCodeSize=n.readByte();var d=a();o.pixels=function(e,t){for(var n,i,r=0,a=function(e){for(var n=0,i=0;i<e;i++)t.charCodeAt(r>>3)&1<<(7&r)&&(n|=1<<i),r++;return n},o=[],s=1<<e,d=s+1,c=e+1,l=[],u=function(){l=[],c=e+1;for(var t=0;t<s;t++)l[t]=[t];l[s]=[],l[d]=null};;)if(i=n,(n=a(c))!==s){if(n===d)break;if(n<l.length)i!==s&&l.push(l[i].concat(l[n][0]));else{if(n!==l.length)throw new Error("Invalid LZW code.");l.push(l[i].concat(l[i][0]))}o.push.apply(o,l[n]),l.length===1<<c&&c<12&&c++}else u();return o}(o.lzwMinCodeSize,d),o.interlaced&&(o.pixels=function(e,t){for(var n=new Array(e.length),i=e.length/t,r=function(i,r){var a=e.slice(r*t,(r+1)*t);n.splice.apply(n,[i*t,t].concat(a))},a=[0,4,2,1],o=[8,8,4,2],s=0,d=0;d<4;d++)for(var c=a[d];c<i;c+=o[d])r(c,s),s++;return n}(o.pixels,o.width)),i.img&&i.img(o)}(s);break;case";":s.type="eof",i.eof&&i.eof(s);break;default:throw new Error("Unknown block: 0x"+s.sentinel.toString(16))}"eof"!==s.type&&setTimeout(o,0)}),0)};function r(e,t){var n=document.createElement("canvas");n.setAttribute("width",t[0].width),n.setAttribute("height",t[0].height);var i=n.getContext("2d"),r=[];return t.forEach((function(t,n){i.clearRect(t.leftPos,t.topPos,t.width,t.height);var a=i.getImageData(t.leftPos,t.topPos,t.width,t.height),o=t.lctFlag?t.lct:e.gtc;t.pixels.forEach((function(e,n){t.transparency!==e?(a.data[4*n+0]=o[e][0],a.data[4*n+1]=o[e][1],a.data[4*n+2]=o[e][2],a.data[4*n+3]=255):2!==t.disposalMethod&&3!==t.disposalMethod||(a.data[4*n+3]=0)})),i.putImageData(a,t.leftPos,t.topPos),r.push(i.canvas.toDataURL())})),r}function a(e){return new Promise((function(t){var a,o,s={},d=[];(o=e,new Promise((function(e,t){var i=new XMLHttpRequest;i.overrideMimeType("text/plain; charset=x-user-defined"),i.onload=function(t){e(new n(i.responseText))},i.onerror=t,i.open("GET",o,!0),i.send()}))).then((function(e){setTimeout((function(){i(e,{gce:function(e){a={transparency:e.transparencyGiven?e.transparencyIndex:null,delay:e.delayTime,disposalMethod:e.disposalMethod}},hdr:function(e){s.width=e.width,s.height=e.height,s.gtc=e.gct},img:function(e){d.push(Object.assign(e,a))},eof:function(){t({uris:r(s,d),delay:10*s.delay})}})}),0)}))}))}var o,s,d,c,l=(o=function(e){var t,n="("+function(){for(var e=["ms","moz","webkit","o"],t=0;t<e.length&&!self.requestAnimationFrame;++t)self.requestAnimationFrame=self[e[t]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[e[t]+"CancelAnimationFrame"]||self[e[t]+"CancelRequestAnimationFrame"];var n={};self.addEventListener("message",(function(e){var t=e.data,i=t.id;if("RPC"===t.type&&null!==i)if("setInterval"==t.method){var r=t.params[0];n[r]=self.setInterval((function(){self.postMessage({type:"interval",id:r})}),t.params[1]),self.postMessage({type:"RPC",id:i,result:r})}else"clearInterval"==t.method&&(self.clearInterval(n[t.params[0]]),delete n[t.params[0]])}))}.toString()+")()",i=window.URL||window.webkitURL;try{t=new Blob([n],{type:"application/javascript"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(t=new BlobBuilder).append(n),t=t.getBlob()}return new Worker(i.createObjectURL(t))}(),s={},c=0,d=function(e,t){var n=++c;return new Promise((function(i){o.addEventListener("message",(function e(t){var r=t.data;r&&"RPC"===r.type&&r.id===n&&(i(r.result),o.removeEventListener("message",e))})),o.postMessage({type:"RPC",method:e,id:n,params:t})}))},o.addEventListener("message",(function(e){var t=e.data;t&&"interval"===t.type&&s[t.id]&&s[t.id]()})),{set:function(e,t){var n=Date.now();return s[n]=e,d("setInterval",[n,t]),n},clear:function(e){return delete s[e],d("clearInterval",[e])}}),u=l;void 0!==document.hidden||void 0!==document.msHidden||document.webkitHidden;var f,p,h,m,g,v,w,y,B=[],b=0;function k(){y&&(u.clear(y),y=null)}function C(){var e;(h=document.querySelector('link[rel*="icon"]'))||((h=document.createElement("link")).setAttribute("rel","icon"),document.head.appendChild(h),e="No default icon found, restore state will not work",console&&console.warn?console.warn(e):setTimeout((function(){throw new Error(e)}),0))}function E(){for(var e=document.querySelectorAll('link[rel*="icon"]'),t=0;t<e.length;t++)e[t]!==h&&e[t].remove()}function A(){if(g){if(!y)if(E(),C(),b=0,v.gif&&a){if(!w)return void setTimeout(A,100);y=u.set(T,20)}else y=u.set(x,20)}else setTimeout(A,100)}function T(){++b>=w.uris.length&&(b=0),P(w.uris[b])}function P(e){var t,n=document.querySelector('link[rel*="icon"]');(t=n.cloneNode(!0)).setAttribute("href",e),n.parentNode.replaceChild(t,n),h=t}function x(){f.clearRect(0,0,v.size,v.size),"function"==typeof v.frame&&v.frame(f),P(f.canvas.toDataURL()),b+=m/100}var S={init:function e(t){if("complete"===document.readyState){v=Object.assign({size:16,radius:6,thickness:2,color:"#0F60A8",duration:5e3},t);for(var n=document.querySelectorAll('link[rel*="icon"]'),i=0;i<n.length;i++){var r=n[i].cloneNode(!0);B.push(r)}if(k(),v.gif){if(void 0===a)throw new Error("parseGIF not defined, please include parseGIF.js file");a(v.gif).then((function(e){w=e}))}else p||(p=document.createElement("canvas")),p.width=p.height=v.size,(f=p.getContext("2d")).lineCap="round",f.lineWidth=v.thickness,f.strokeStyle=v.color,m=v.duration;g=!0}else setTimeout(e.bind(this,t),100)},start:A,animatePng:function(e){if(g){if(!y&&(E(),C(),e)){f.clearRect(0,0,v.size,v.size);var t=new Image;t.src=e,t.onload=function(){f.drawImage(t,0,0,v.size,v.size),P(f.canvas.toDataURL())}}}else setTimeout(A,100)},stop:function(){if(h&&h.parentNode&&h.parentNode.removeChild(h),console.log(B),B.length)for(var e=0;e<B.length;e++)document.head.appendChild(B[e]);k()},interval:u,version:"0.4.4"},z=null,I=window.nx_flashing_tab,R=window.document.title;S.init({size:16,radius:6,thickness:2,color:"#0F60A8",duration:5e3}),window.addEventListener("visibilitychange",(function(e){"visible"===document.visibilityState?(S.stop(),U()):setTimeout((function(){z=u.set(F,2e3)}),2e3)}));var F=function(){document.title!==I.ft_message_1?(document.title=I.ft_message_1,S.animatePng(I.ft_icon_1)):(document.title=I.ft_message_2,S.animatePng(I.ft_icon_2))},U=function(){document.title=R,z&&(u.clear(z),z=null)}}();