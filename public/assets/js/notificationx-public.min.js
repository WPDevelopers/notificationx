!function(y){"use strict";y.notificationx=y.notificationx||{},y.notificationx.active_pressbar=0,y.notificationx.countdownInterval=null,y(document).ready(function(){y.notificationx.init()}),window.addEventListener("load",function(){y.notificationx.pressbar()}),y.notificationx.init=function(){y.notificationx.windowWidth=y(window).outerWidth(),y.notificationx.conversions(),y.notificationx.analytics(),y.notificationx.events()},y.notificationx.Ajaxlytics=function(n){if(n!={}&&null!=n&&"undefined"!=typeof NotificationX){if(null==n.nonce)return;jQuery.ajax({type:"POST",url:NotificationX.ajaxurl,data:{action:"notificationx_pro_analytics",nonce:n.nonce,id:n.id,clicked:n.clicked||!1,nonce_key:n.nonce_key||!1},success:function(n){}})}},y.notificationx.analytics=function(){var a={};y("body").on("nx_frontend_bar_show",function(n,i,t){var o=y(i).data("nonce"),e=1==y(i).data("analytics");a.nonce=o,a.id=t,a.nonce_key="_notificationx_bar_nonce",null!=o&&e&&(y.notificationx.Ajaxlytics(a),y(i).find("a.nx-bar-button").on("click",function(n){n.preventDefault(),a.clicked=!0,y.notificationx.Ajaxlytics(a),a.clicked=!1,n.currentTarget.attributes.hasOwnProperty("target")?window.open(y(this).attr("href")):window.location.href=y(this).attr("href")}))}),y("body").on("nx_before_render",function(n,i,t){var o;i.id&&i.analytics&&(o=y(t).find(".notificationx-analytics").val(),a.nonce=o,a.id=i.id,a.nonce_key="_notificationx_pro_analytics_nonce",y.notificationx.Ajaxlytics(a))}),y("body").on("nx_frontend_jquery",function(n,t,i){t.id&&t.analytics&&y(i).on("click",function(n){var i=y(this).find(".notificationx-analytics").val();a.nonce=i,a.id=t.id,a.nonce_key="_notificationx_pro_analytics_nonce",a.clicked=!0,y.notificationx.Ajaxlytics(a),a.clicked=!1})})},y.notificationx.countdown=function(n){var i,t,o,e,a,c,r,s;n.end_date&&(i=new Date,t=n.end_date.getTime(),e=0,(e=parseInt((t-i)/1e3))<=0&&(y.notificationx.countdownInterval&&clearInterval(y.notificationx.countdownInterval),e=0,n.evergreen?y.notificationx.hideBar("nx-bar-"+n.id,!0):(n.bar.querySelector(".nx-countdown").classList.add("nx-expired"),null!=(o=n.bar.querySelector(".nx-countdown-text"))&&o.classList.add("nx-expired"))),a=0,c=((c=((e=((e=(e-(a=e%60))/60)-(s=e%60))/60)-(r=e%24))/24)<10?"0":"")+c,r=(r<10?"0":"")+r,s=(s<10?"0":"")+s,a=(a<10?"0":"")+a,n.days.innerHTML=c,n.hours.innerHTML=r,n.minutes.innerHTML=s,n.seconds.innerHTML=a)},y.notificationx.countdownWrapper=function(n){y.notificationx.countdownInterval=setInterval(function(){y.notificationx.countdown(n)},1e3),y.notificationx.countdown(n)},y.notificationx.pressbar=function(){var n=y(".nx-bar");0<n.length&&n.each(function(n,i){var t,o,e=i.dataset.press_id,a=i.dataset.hide_after,c=i.dataset.auto_hide,r=i.dataset.close_forever,s=!!i.dataset.start_date&&new Date(i.dataset.start_date),d=!!i.dataset.end_date&&new Date(i.dataset.end_date),f=i.querySelector(".nx-bar-inner").offsetHeight,l=1e3*i.dataset.initial_delay,x=i.dataset.position,u=i.dataset.body_push,p=Boolean(i.dataset.evergreen);if(i.classList.contains("nx-bar-shortcode"))return!1;if(Cookies.get("notificationx_nx-bar-"+e))return!1;"pushed"!=u&&null!=u||(t=setTimeout(function(){y(i).hasClass("nx-bar-out")||y("body").addClass("has-nx-bar").css("padding-"+x,f),clearTimeout(t)},l),parseInt(c)&&(o=setTimeout(function(){y("body").css("padding-"+x,0).removeClass("has-nx-bar"),clearTimeout(o)},1e3*parseInt(a))));var v,_={id:e,bar:i,end_date:d,evergreen:p,start_date:s,days:i.querySelector(".nx-days"),hours:i.querySelector(".nx-hours"),minutes:i.querySelector(".nx-minutes"),seconds:i.querySelector(".nx-seconds")};y.notificationx.showBar(i,e),p||y.notificationx.countdownWrapper(_),""===a&&void 0===a||!parseInt(c)||(v=setTimeout(function(){y.notificationx.hideBar("nx-bar-"+e,r),clearTimeout(v)},1e3*parseInt(a)))})},y.notificationx.conversions=function(){"undefined"!=typeof notificationx&&(window.localStorage.removeItem("nx_notifications"),0<notificationx.notificatons.length&&notificationx.notificatons.map(function(n){y.notificationx.process(n)}),0<notificationx.global_notifications.length&&y.notificationx.process(notificationx.global_notifications))},y.notificationx.events=function(){var n=y(".nx-bar .nx-close");null!==n&&n.on("click",function(n){y.notificationx.active_pressbar=0,y.notificationx.hideBar(n.currentTarget.offsetParent.id)})},y.notificationx.showBar=function(i,o){if(Cookies.get("notificationx_nx-bar-"+o))return!1;var n=parseInt(i.dataset.initial_delay),t=y(i).children(".nx-bar-inner"),e=document.querySelector("#wpadminbar"),a=null!=e?e.offsetHeight:0;""!==n&&!isNaN(n)||(n=0);var c=setTimeout(function(){var n;y(i).hasClass("nx-bar-out")?clearTimeout(c):((n=y("html")).addClass("nx-bar-active"),y(i).hasClass("nx-position-top")&&(y(n).animate({"padding-top":"0px"},{duration:300}),n.css("padding-top",t+"px"),y(i).animate([{top:"0px"},{top:a+"px"}],{duration:300}),y(i).css("top",a+"px")),y(i).addClass("nx-bar-visible"),y("body").trigger("nx_frontend_bar_show",[i,o]),y.notificationx.active_pressbar=1,clearTimeout(c),y(i).find("#nx-consent-accept")&&y(i).on("click","#nx-consent-accept",function(n){n.preventDefault(),console.log();var i=new Date(((new Date).getFullYear()+5).toString()),t="nx-bar-"+o;Cookies.set("notificationx_"+t,!0,{expires:i,path:"/"}),y.notificationx.hideBar(t)}))},1e3*n)},y.notificationx.hideBar=function(n){var i,t,o,e,a=y(".nx-bar#"+n),c=y("html");a.length&&(i=a[0].dataset.close_forever,t=y("#"+n).data("position"),i&&(o=(new Date).getTime()+5184e6,e=new Date(o),Cookies.set("notificationx_"+n,!0,{expires:e,path:"/"})),c.removeClass("nx-bar-active"),c.css("padding-top",0),a.addClass("nx-bar-out").parents("body").css("padding-"+t,0).removeClass("has-nx-bar"),a.removeClass("nx-bar-visible"),y.notificationx.active_pressbar=0)},y.notificationx.render=function(i,n){var t=document.createElement("div");t.classList.add("notificationx-conversions"),t.insertAdjacentHTML("beforeend",n);var o=null!=i.id?".notificationx-"+i.id:".nx-notification",e=0,a=t.querySelectorAll(o),c=i.delay_between,r=y.notificationx.last(i.id,!1);0<=r&&(e=r+1),0===i.loop&&1===a.length&&(e=0),y("body").trigger("nx_before_render",[i,n]),setTimeout(function(){y.notificationx.show(a[e],i,e),setTimeout(function(){y.notificationx.hide(a[e],i.id),e++;var n=setInterval(function(){y.notificationx.show(a[e],i,e),setTimeout(function(){y.notificationx.hide(a[e],i.id),e>=a.length-1?(e=0)==i.loop&&clearInterval(n):e++},i.display_for)},c+i.display_for)},i.display_for)},i.delay_before)},y.notificationx.process=function(n){var i=n,t=!1;"number"!=typeof i&&(i=i.toString(),t=!0),jQuery.post({url:notificationx.ajaxurl,method:"POST",credentials:"same-origin",data:{action:"nx_get_conversions",nonce:notificationx.nonce,ids:i,global:t},success:function(n){var i=JSON.parse(n);y.notificationx.render(i.config,i.content)}}).fail(function(n){console.error(n),console.error("AJAX error, Something went wrong! Please, Contact support team.")})},y.notificationx.show=function(n,o,i){if(void 0!==n&&0!==n.length){var e=Cookies.get("nx-close-for-session");if(null!=e){if((e=JSON.parse(e)).hasOwnProperty(o.id)&&1==e[o.id])return}else e={};var t,a=y(n).find("img"),c=-1;null!=(a=a[0])&&(t=a.src,c=a.src.indexOf(".gif"));var r=y("body"),s=-1!=n.classList.value.indexOf("nx-mobile-notification"),d=s?"10px":"30px";r.append(n),0<c&&(a.src=t),480<y.notificationx.windowWidth&&s&&(d="20px"),786<y.notificationx.windowWidth&&(d="30px"),y(n).animate({bottom:d,opacity:1},500),r.trigger("nx_frontend_jquery",[o,n]),y.notificationx.save(o.id,i);var f=y(n).find(".notificationx-close");null!=f&&f.on("click",function(n){var i=y(this),t=y(i[0]).parents(".nx-notification");y.notificationx.hide(t,o.id),e[o.id]=!0,Cookies.set("nx-close-for-session",JSON.stringify(e))})}},y.notificationx.hide=function(n,i){var t;void 0!==n&&(null!=(t=Cookies.get("nx-close-for-session"))&&null!=i&&t.hasOwnProperty(i)&&1==t[i]||(y(n).animate({bottom:"0px",opacity:0},500),setTimeout(function(){y.notificationx.remove(y(n))},300)))},y.notificationx.remove=function(n){n.remove()},y.notificationx.save=function(n,i){var t;window.localStorage?("object"==typeof(t=y.notificationx.last(n,!0))?t[n]=i:(t=new Object)[n]=i,window.localStorage.setItem("nx_notifications",JSON.stringify(t))):console.log("Browser does not support localStorage!")},y.notificationx.last=function(n,i){var t=-1;if(window.localStorage){var o=window.localStorage.getItem("nx_notifications");if(null!==o&&void 0!==(o=JSON.parse(o))[n]){if(i)return o;t=o[n]}}else console.log("Browser does not support localStorage!");return t}}(jQuery);