!function(l){"use strict";l.notificationx=l.notificationx||{},l(document).ready(function(){l.notificationx.init(),l.notificationx.installPlugin(),l("body").on("click",".nx-metatab-menu li, .nx-builder-tab-menu li, .nx-meta-next, .nx-quick-builder-btn",function(e){e.preventDefault(),l.notificationx.tabChanger(this)}),l("body").on("click",".nx-meta-modal-next",function(e){e.preventDefault(),l(".nx-press-bar-modal-wrapper.active").removeClass("active"),l.notificationx.tabChanger(this)}),l("body").on("change",".nx-single-theme-wrapper > input:checked",function(e){e.preventDefault(),l.notificationx.templateForTheme()}),l("body").on("click",".nx-email-test",function(e){e.preventDefault(),l.notificationx.testReport()}),l("body").on("change","#nx_meta_evergreen_timer",function(){return l(".nx-time_randomize_between").hide(),l(".nx-time_rotation").hide(),l("#nx_meta_enable_countdown").is(":checked")?(l("#nx_meta_time_randomize").is(":checked")&&this.checked?(l(".nx-time_rotation").hide(),l(".nx-time_randomize_between").show()):this.checked&&(l(".nx-time_rotation").show(),l(".nx-time_randomize_between").hide()),void(this.checked?(l(".nx-countdown_start_date").hide(),l(".nx-countdown_end_date").hide(),l(".nx-countdown_expired_text").hide()):(l(".nx-countdown_start_date").show(),l(".nx-countdown_end_date").show(),l(".nx-countdown_expired_text").show()))):(l(".nx-time_randomize").hide(),void l(".nx-time_reset").hide())}),l("body").on("change","#nx_meta_time_randomize",function(){return l(".nx-time_randomize_between").hide(),l(".nx-time_rotation").hide(),l("#nx_meta_enable_countdown").is(":checked")&&l("#nx_meta_evergreen_timer").is(":checked")?void(this.checked?(l(".nx-time_rotation").hide(),l(".nx-time_randomize_between").show()):(l(".nx-time_rotation").show(),l(".nx-time_randomize_between").hide())):(l(".nx-time_randomize").hide(),void l(".nx-time_reset").hide())}),l("body").on("change","#nx_meta_enable_countdown",function(){l("#nx_meta_evergreen_timer").trigger("change"),l("#nx_meta_time_randomize").trigger("change")}),l("#nx_meta_evergreen_timer").trigger("change"),l("#nx_meta_time_randomize").trigger("change")}),l.notificationx.installPlugin=function(){l(".nx-on-click-install").each(function(e){l(this).on("click",function(e){e.preventDefault();var t=l(this);t.addClass("install-now updating-message"),t.text("Installing...");var n=t.data("nonce"),i=t.data("slug"),e=t.data("plugin_file");l.ajax({url:ajaxurl,type:"POST",data:{action:"wpdeveloper_upsale_core_install_notificationx",_wpnonce:n,slug:i,file:e},success:function(e){t.text("Installed"),t.hasClass("nx-bar_with_elementor_install")?setTimeout(function(){l(".nx-bar-install-elementor").remove(),l(".nx-bar_with_elementor").removeClass("hidden")},2e3):setTimeout(function(){t.parents(".nx-field").hide()},2e3)},error:function(e){console.log(e),t.removeClass("install-now updating-message"),alert(e)},complete:function(){t.attr("disabled","disabled"),t.removeClass("install-now updating-message")}})})})},l(window).load(function(){l(".nx-preloader").fadeOut({complete:function(){l(".nx-metatab-inner-wrapper").fadeIn()}});var e=l.notificationx.get_query_vars("page");null!=e&&0<=e.indexOf("nx-settings")&&(e=e.split("#"),l('.nx-settings-menu li[data-tab="'+e[1]+'"]').trigger("click")),l("body").on("change",".nx_meta_display_type",function(){var e=l(this).val();switch(l.notificationx.get_instructions_enabled(e,!1),e){case"conversions":l(".nx-themes .nx_meta_theme:checked").trigger("change"),l.notificationx.trigger(".nx_meta_conversion_from"),l("#nx_meta_advance_edit").trigger("change");break;case"comments":l(".nx-comment_themes .nx_meta_comment_theme:checked").trigger("change"),l.notificationx.trigger(".nx_meta_comments_source"),l("#nx_meta_comment_advance_edit").trigger("change");break;case"reviews":l(".nx-wporg_themes .nx_meta_wporg_theme:checked").trigger("change"),l.notificationx.trigger(".nx_meta_reviews_source"),l("#nx_meta_wporg_advance_edit").trigger("change");break;case"download_stats":l(".nx-wpstats_themes .nx_meta_wpstats_theme:checked").trigger("change"),l.notificationx.trigger(".nx_meta_stats_source"),l("#nx_meta_wpstats_advance_edit").trigger("change");break;case"elearning":l(".nx-elearning_themes .nx_meta_elearning_theme:checked").trigger("change"),l.notificationx.trigger(".nx_meta_elearning_source"),l("#nx_meta_elearning_advance_edit").trigger("change");break;case"donation":l(".nx-donation_themes .nx_meta_donation_theme:checked").trigger("change"),l.notificationx.trigger(".nx_meta_donation_source"),l("#nx_meta_donation_advance_edit").trigger("change");break;case"form":l(".nx-form_themes .nx_meta_form_theme:checked").trigger("change"),l.notificationx.trigger(".nx_meta_form_source"),l("#nx_meta_form_advance_edit").trigger("change")}l.notificationx.templateForTheme()}),l("body").on("change","#nx_meta_wp_stats_template_new #nx_meta_wp_stats_template_new_third_param",function(){var e=l(this).val();if("tag_custom_stats"==e)return"";l("#nx_meta_wp_stats_template_new #nx_meta_wp_stats_template_new_fourth_param").val(e+"_text").trigger("change")}),l("body").on("change",".nx_meta_conversion_from",function(e){var t=l(this).val();l.notificationx.get_instructions_enabled(!1,t),l(".nx-themes .nx_meta_theme:checked").trigger("change"),l("#nx_meta_combine_multiorder:checked").trigger("change"),"woocommerce"===t&&l("#nx_meta_woo_template_adv").trigger("change")}),l("body").on("change","#nx_meta_disable_reporting",function(e){l(this).is(":checked")||l("#nx_meta_reporting_frequency").trigger("change")}),l("body").on("change",".nx_meta_elearning_source",function(){var e=l(this).val();switch(l.notificationx.get_instructions_enabled(!1,e),e){case"learndash":l("#nx_meta_ld_product_control").trigger("change");break;case"tutor":l("#nx_meta_tutor_product_control").trigger("change")}}),l("body").on("change",".nx_meta_donation_source",function(){var e=l(this).val();l.notificationx.get_instructions_enabled(!1,e),"give"===e&&l("#nx_meta_give_forms_control").trigger("change")}),l("body").on("change",".nx_meta_form_source",function(){var e=l(this).val();l.notificationx.get_instructions_enabled(!1,e)}),l("body").on("change",".nx_meta_comments_source",function(){var e=l(this).val();l.notificationx.get_instructions_enabled(!1,e),l(".nx-comment_themes .nx_meta_comment_theme:checked").trigger("change")}),l("body").on("change",".nx_meta_reviews_source",function(){var e,t=l(this).val();switch(l.notificationx.get_instructions_enabled(!1,t),l(".nx-wporg_themes .nx_meta_wporg_theme:checked").trigger("change"),l("#nx_meta_wp_reviews_template_adv").trigger("change"),t){case"wp_reviews":l("#nx_meta_wp_reviews_template_adv").trigger("change"),(e=l("#nx_meta_wp_reviews_template_new_third_param"))[0][0].innerText="Plugin Name",e.select2();break;case"woo_reviews":(e=l("#nx_meta_wp_reviews_template_new_third_param"))[0][0].innerText="Product Name",e.select2()}}),l("body").on("change",".nx_meta_stats_source",function(){var e=l(this).val();l.notificationx.get_instructions_enabled(!1,e),l(".nx-wpstats_themes .nx_meta_wpstats_theme:checked").trigger("change"),l("#nx_meta_wp_stats_template_adv").trigger("change"),"wp_stats"===e&&l("#nx_meta_wp_stats_template_adv").trigger("change")}),l("body").on("change",".nx-builder-content-wrapper .nx_meta_display_type",function(e){var t=e.currentTarget.value,e=notificationx.title_of_types[t],t=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});l(".finalize_notificationx_name").text("NotificationX - "+e+" - "+t)}),l(".nx_meta_display_type:checked").trigger("change")}),l.notificationx.get_instructions_enabled=function(t,n){var i=!1;n||0==t?(i=i&&!1,Array.from(document.querySelectorAll("#nx-instructions .nxins-type .nxins-type-source")).forEach(function(e){e.style.display="none",e.classList.contains(n)&&(e.style.display="block",i=!0)})):Array.from(document.querySelectorAll("#nx-instructions .nxins-type")).forEach(function(e){e.style.display="none",e.classList.contains(t)&&(e.style.display="block",i=!0)}),i?l("#nx-instructions").show():l("#nx-instructions").hide()},l.notificationx.init=function(){l.notificationx.enabledDisabled(),l.notificationx.toggleFields(),l.notificationx.bindEvents(),l.notificationx.initializeFields(),l.notificationx.create_nx_bar()},l.notificationx.create_nx_bar=function(){l("body").on("change",".nx_meta_display_type",function(){"press_bar"==l(this).val()&&0<l(".nx-bar_with_elementor-remove").length?l("#nx-meta-close_forever_2").show().find("input").attr("name","nx_meta_close_forever_3"):l("#nx-meta-close_forever_2").hide()}),l("body").on("click",".nx-bar_with_elementor",function(e){e.preventDefault(),l(this).addClass("active"),l(".nx-press-bar-modal-wrapper").addClass("active"),l(".nx-metatab-menu > ul > li[data-tab='content_tab']").hide(),l("#nx-design_tab .nx-meta-next").data("tab","display_tab"),l("#nx-design_tab .nx-meta-next").data("tabid","4"),l("#nx-meta-close_forever_2").show().find("input").attr("name","nx_meta_close_forever_3")}),l(".nx-modal-close").on("click",function(e){e.preventDefault(),e.currentTarget.classList.contains("nx-template-imported")||(l(".nx-metatab-menu > ul > li[data-tab='content_tab']").show(),l("#nx-design_tab .nx-meta-next").data("tab","content_tab"),l("#nx-design_tab .nx-meta-next").data("tabid","3"),l(".nx-bar_with_elementor").removeClass("active"),l("#nx-meta-close_forever_2").hide()),l(".nx-press-bar-modal-wrapper").removeClass("active")}),l(".nx-bar_with_elementor-import").on("click",function(e){e.preventDefault(),l(".nx-press-bar-modal-preload").addClass("active"),l(".nx-press-bar-modal-preload.active .nx-modal-loading-text").addClass("active");var t=l(this),n=t.data("theme"),i=t.data("nonce"),e=l("#post").serializeArray(),t=t.data("the_post");l.ajax({type:"post",url:window.ajaxurl,data:{action:"nx_create_bar",nonce:i,bar_id:t,theme:n,post_data:e},success:function(e){l(".nx-modal-close").addClass("nx-template-imported"),l(".nx-press-bar-modal-preload.active .nx-modal-loading-text.active").removeClass("active"),l(".nx-press-bar-modal-preload.active .nx-modal-success-text").addClass("active")}}).fail(function(e){console.log(e)})}),l(".nx-bar_with_elementor-remove").on("click",function(e){e.preventDefault();var t=l(this),n=t.data("nonce"),e=t.data("bar_id"),t=t.data("post_id");l.ajax({type:"post",url:window.ajaxurl,data:{action:"nx_create_bar_remove",nonce:n,bar_id:e,post_id:t},success:function(e){window.location.reload()}})})},l.notificationx.trigger=function(e){null==l(e+":checked").val()?l(e+":first").trigger("click"):l(e+":checked").is(":disabled")?l(".nx-radio-pro").trigger("click"):l(e+":checked").trigger("change")},l.notificationx.templateForTheme=function(){var e,t,n,i,a,o,r=l(".nx_meta_display_type:checked").val();"press_bar"!==r&&(a=l(".nx_meta_"+notificationx.source_types[r]+":checked").val(),notificationx.theme_sources.hasOwnProperty(a)&&(t=("object"==typeof notificationx.theme_sources[a]?l(".nx_meta_"+notificationx.theme_sources[a][r]+":checked"):l(".nx_meta_"+notificationx.theme_sources[a]+":checked")).val()),n="",notificationx.template_keys.hasOwnProperty(a)&&(n="object"==typeof notificationx.template_keys[a]?(e=l("#nx_meta_"+notificationx.template_keys[a][r]),notificationx.template_keys[a][r]):(e=l("#nx_meta_"+notificationx.template_keys[a]),notificationx.template_keys[a])),e.length<=0||(0<=t.indexOf("comments-")&&(n="comments_template_new"),0<=t.indexOf("subs-")&&(n="mailchimp_template_new"),0<=t.indexOf("reviews-")&&(n="wp_reviews_template_new"),r="",null!=(n=0<=t.indexOf("stats-")?"wp_stats_template_new":n)&&(r=n.replace("_new","_adv"),i=n.replace("_new",""),r=l("#nx_meta_"+r),i=l("#nx_meta_"+i)),a=e.attr("id"),"maps_theme"===t||"comments-maps_theme"===t||"subs-maps_theme"===t||"conv-theme-six"===t?(i.hide(),e=l("#nx_meta_maps_theme_template_new"),r=l("#nx_meta_"+(r="maps_theme_template_adv"))):i.show(),null!=n&&null!=r[0]&&!0===r[0].checked&&r.trigger("change"),0<=Object.keys(notificationx.template_settings).indexOf(a)&&0<=Object.keys(notificationx.template_settings[a]).indexOf(t)&&(o=notificationx.template_settings[a][t],e.find("input, select").each(function(e,t){var n=l(t).data("subkey");0<=Object.keys(o).indexOf(n)&&("text"===t.type&&"INPUT"===t.nodeName?l(t).val(o[n]):l(t).val(o[n]).trigger("change"))}))))},l.notificationx.bindEvents=function(){l("#nx_meta_show_on").trigger("change"),l("body").on("click",".nx-adv-checkbox-wrap label, #nx_sound_checkbox, .nx-stats-tease, .nx-cmo-conf",function(e){var t;void 0!==l(this)[0].dataset.swal&&(void 0!==l(this)[0].dataset.swal&&e.preventDefault(),t=document.createElement("p"),(e=document.createElement("a")).setAttribute("href","https://notificationx.com"),e.innerText="Premium",e.style.color="red",t.innerHTML="You need to upgrade to the <strong>"+e.outerHTML+" </strong> Version to use this feature",swal({title:"Opps...",content:t,icon:"warning",buttons:[!1,"Close"],dangerMode:!0}))}),l("body").delegate(".nx-group-field .nx-group-field-title","click",function(e){e.preventDefault(),l(e.currentTarget).hasClass("nx-group-field-title")&&l.notificationx.groupToggle(this)}),l("body").delegate(".nx-group-field .nx-group-clone","click",function(){l.notificationx.cloneGroup(this)}),l("body").on("click",".nx-group-field .nx-group-remove",function(){l.notificationx.removeGroup(this)}),l("body").delegate(".nx-media-field-wrapper .nx-media-upload-button","click",function(e){e.preventDefault(),l.notificationx.initMediaField(this)}),l("body").delegate(".nx-media-field-wrapper .nx-media-remove-button","click",function(e){e.preventDefault(),l.notificationx.removeMedia(this)}),l("body").delegate(".nx-settings-menu li","click",function(e){l.notificationx.settingsTab(this)});var t=l(".nx-settings-button");l("body").on("click",".nx-pro-checkbox > label, .nx-radio-pro",function(e){e.preventDefault();var t=document.createElement("p"),n=document.createElement("a");n.setAttribute("href","https://wpdeveloper.net/in/notificationx-pro"),n.innerText="Premium",n.style.color="red";e=l(this).find(".nx-pro-label");e.hasClass("has-to-update")&&(n.innerText="Latest Pro v"+e.text().toString().replace(/[ >=<]/g,"")),t.innerHTML="You need to upgrade to the <strong>"+n.outerHTML+" </strong> Version to use this module.",swal({title:"Opps...",content:t,icon:"warning",buttons:[!1,"Close"],dangerMode:!0})}),l(".nx-checkbox-area .nx-checkbox input:enabled, .nx-settings-field").on("click",function(e){t.addClass("nx-save-now").removeAttr("disabled").css("cursor","pointer")}),l("body").delegate(".nx-settings-button","click",function(e){e.preventDefault();e=l(this).parents("#nx-settings-form");l.notificationx.submitSettings(this,e)}),l("body").delegate(".nx-opt-alert","click",function(e){l.notificationx.fieldAlert(this)}),l("body").delegate(".nx-section-reset","click",function(e){e.preventDefault(),l.notificationx.resetSection(this)})},l.notificationx.enabledDisabled=function(){l(".nx-admin-status label").on("click",function(e){e.stopPropagation();var t=l(this),n=t.data("post"),i=t.data("nonce"),a=t.siblings("input"),o=t.data("swal"),e=a.is(":checked");if(o){a=document.createElement("p"),o=document.createElement("a");return o.setAttribute("href","https://wpdeveloper.net/in/notificationx-pro"),o.innerText="Premium",o.style.color="red",a.innerHTML="You need to upgrade to the <strong>"+o.outerHTML+" </strong> Version to use multiple notification for same type.",void swal({title:"Opps...",content:a,icon:"warning",buttons:[!1,"Close"],dangerMode:!0})}e?(t.siblings(".nx-admin-status-title.nxast-enable").removeClass("active"),t.siblings(".nx-admin-status-title.nxast-disable").addClass("active")):(t.siblings(".nx-admin-status-title.nxast-disable").removeClass("active"),t.siblings(".nx-admin-status-title.nxast-enable").addClass("active")),l.ajax({type:"post",url:window.ajaxurl,data:{action:"notifications_toggle_status",post_id:n,nonce:i,status:e?"inactive":"active",url:window.location.href},success:function(e){"success"!==e&&(window.location.href=window.location.href)}})})},l.notificationx.initializeFields=function(){0<l(".nx-meta-field, .nx-settings-field").length&&l(".nx-meta-field, .nx-settings-field").map(function(e,i){var t,n,a,o;"SELECT"===i.nodeName&&(t={},n=l("#nx_meta_"+l(i).data("nxajax")).val(),a={ajax:{url:ajaxurl,method:"GET",dataType:"json",cache:!0,data:function(e){return{action:l(i).data("ajax_action"),form_id:l("#nx_meta_"+l(i).data("nxajax")).val()}},processResults:function(e){return{results:e}}}},l(i).data("nxajax")&&0<l(i).data("ajax_action").length&&(t=l.extend(t,a)),l(i).select2(t),null!=n&&(o=l(i).data("value"),0<Object.keys(t).length&&0<l(i).data("ajax_action").length&&l.ajax({type:"GET",url:ajaxurl,data:{action:l(i).data("ajax_action"),form_id:n}}).then(function(e){var t,n=JSON.parse(e);"object"==typeof n&&(0===(t=n.filter(function(e){return e.id===o})).length&&(t=n),0===o.length&&(o=t[0].id),t=new Option(t[0].text,o,!0,!0),l(i).append(t).trigger("change"),l(i).trigger({type:"select2:select",params:{data:e}}))})))}),0<l(".nx-countdown-datepicker").length&&l("body .nx-control").find(".nx-countdown-datepicker").each(function(e,t){"timepicker"===l(t).find("input").data("only")?l(t).find("input").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"h:i K"}):l(t).find("input").flatpickr({enableTime:!0,dateFormat:"D, M d, Y h:i K"})}),l(".notificationx-metabox-wrapper .nx-meta-field:not(.nx_meta_conversion_from)").trigger("change"),l(".nx-settings .nx-settings-field").trigger("change"),0<l(".nx-colorpicker-field").length&&void 0!==l.fn.wpColorPicker&&l(".nx-colorpicker-field").each(function(){var e=l(this).val();l(this).wpColorPicker({change:function(e,t){e=e.target,t=t.color.toString();l(e).parents(".wp-picker-container").find("input.nx-colorpicker-field").val(t).trigger("change")}}).parents(".wp-picker-container").find(".wp-color-result").css("background-color","#"+e)}),l.notificationx.groupField(),l.notificationx.template(),l(".nx-meta-template-editable").trigger("blur")},l.notificationx.groupField=function(){l(".nx-group-field-wrapper").length<0||(l(".nx-group-field-wrapper").find("div.nx-group-field:last-of-type").addClass("open"),l(".nx-group-field-wrapper").each(function(){var r=l(this),e=r.find(".nx-group-field");r.find(".nx-group-field:first"),r.find(".nx-group-field:last");e.each(function(){var e=l(this).find(".nx-group-field-title:not(.open)").next();e.is(":visible")&&e.addClass("open")}),r.find(".nx-group-field-add").on("click",function(e){e.preventDefault();var t=r.attr("id"),i=r.data("name"),n=(r.find(".nx-group-fields-wrapper"),r.find(".nx-group-field")),a=(r.find(".nx-group-field:first"),r.find(".nx-group-field:last")),e=l(r.find(".nx-group-template").html()),a=parseInt(a.data("id")),o=1;e.data("group-title");isNaN(a)||(o=a+1),n.each(function(){l(this).removeClass("open")}),e.attr("data-id",o),e.addClass("open"),e.find("tr.nx-field[id*="+t+"]").each(function(){var e=i,t=l(this).attr("id").split("[1]")[1],t=e+"["+o+"]"+t,n=l(this).find("th label");l(this).find('[name*="'+e+'[1]"]').each(function(){var e=l(this).attr("name").split("[1]"),t=e[0],e=e[1],e=t+"["+o+"]"+e;l(this).attr("id",e).attr("name",e),n.attr("for",e)}),l(this).attr("id",t)}),e.insertBefore(l(this)),l.notificationx.resetFieldIds(l(this).parents(".nx-group-fields-wrapper").find(".nx-group-field")),0<l(".nx-countdown-datepicker").length&&l("body .nx-group-field").find(".nx-countdown-datepicker").each(function(e,t){var n=l(t).find("input"),t=n.val();n.flatpickr({enableTime:!0,defaultDate:t,dateFormat:"D, M d, Y h:i K"})})})}))},l.notificationx.tabChanger=function(e){var t,n=l(e),i=n.data("tabid"),a=n.data("tab");if(""!=a&&(o=l("#nx-"+a),l("#nx_builder_current_tab").val(a)),n.hasClass("nx-quick-builder-btn")&&(t=n.hasClass("btn-next")?"right":"left"),"BUTTON"!==e.nodeName)return n.parent().find("li").each(function(e){e<i?l(this).addClass("nx-complete"):l(this).removeClass("nx-complete")}),n.addClass("active").siblings().removeClass("active"),void o.addClass("active").siblings().removeClass("active");if(void 0===o)return console.log("add popup"),void l("#publish").trigger("click");var n=l(".nx-builder-tab-menu").find('li[data-tab="content_tab"]'),o="none";0<n.length&&(null!=n[0]&&(o=n[0].style.display,o=l('.nx-builder-tab-menu li[data-tabid="'+i+'"]')[0].style.display),"none"==o&&null!=t&&("left"==t?i-=1:i+=1)),l('.nx-metatab-menu li[data-tabid="'+i+'"]').trigger("click"),l('.nx-builder-tab-menu li[data-tabid="'+i+'"]').trigger("click")},l.notificationx.toggleFields=function(){l("body").delegate(".nx-meta-field, .nx-settings-field","change",function(e){("radio"!=this.type||this.checked)&&l.notificationx.checkDependencies(this)}),l("body").delegate(".nx-meta-field, .nx-settings-field","click",function(e){this.dataset.hasOwnProperty("swal")&&this.dataset.swal&&(l.notificationx.fieldAlert(this),e.preventDefault())})},l.notificationx.toggle=function(e,t,n,i,a){var o=0;if(i=void 0===i?"":i,void 0!==e)for(;o<e.length;o++){var r=n+e[o]+i;0<=notificationx.template.indexOf(a)&&(r="#nx_meta_"+a+"_"+e[o]+i);var c=l(r);null!=c[0]&&"SELECT"===c[0].nodeName&&c.next()[t](),l(r)[t]()}},l.notificationx.checkDependencies=function(e){var n,t,i,a;null!==notificationx.toggleFields&&(a=(i=l(e)).parents(".nx-field:first").data("id"),e=i.val(),"checkbox"===i.attr("type")&&(e=i.is(":checked")?1:0),i.hasClass("nx-theme-selected")&&(t=i.parents(".nx-theme-control-wrapper").data("name"),e=l("#"+t).val()),n=a,0<=notificationx.template.indexOf(a)&&(a=i.data("subkey")),notificationx.toggleFields.hasOwnProperty(a)&&(t=notificationx.toggleFields[a].hasOwnProperty(e),i=!0,notificationx.hideFields[a]&&(i=notificationx.hideFields[a].hasOwnProperty(e)),notificationx.toggleFields.hasOwnProperty(a)&&i&&l.each(notificationx.toggleFields[a],function(e,t){l.notificationx.toggle(t.fields,"hide","#nx-meta-","",n),l.notificationx.toggle(t.sections,"hide","#nx-meta-section-","",n)}),t&&(l.notificationx.toggle(notificationx.toggleFields[a][e].fields,"show","#nx-meta-","",n),l.notificationx.toggle(notificationx.toggleFields[a][e].sections,"show","#nx-meta-section-","",n))),!notificationx.hideFields.hasOwnProperty(a)||(a=notificationx.hideFields[a]).hasOwnProperty(e)&&(l.notificationx.toggle(a[e].fields,"hide","#nx-meta-","",n),l.notificationx.toggle(a[e].sections,"hide","#nx-meta-section-","",n)))},l.notificationx.selectTheme=function(e){var t=l(e),n=t.find("img").data("theme"),e=l(t.parents(".nx-theme-control-wrapper")).data("name");t.addClass("nx-theme-selected").siblings().removeClass("nx-theme-selected"),l("#"+e).val(n),t.trigger("change")},l.notificationx.groupToggle=function(e){e=l(e).parents(".nx-group-field");(e.hasClass("open")?e:e.addClass("open").siblings()).removeClass("open")},l.notificationx.removeGroup=function(e){var t=l(e).parents(".nx-group-field").attr("data-id"),e=l(e).parents('.nx-group-field[data-id="'+t+'"]'),t=e.parent();e.fadeOut({duration:300,complete:function(){l(this).remove()}}),l.notificationx.resetFieldIds(t.find(".nx-group-field"))},l.notificationx.cloneGroup=function(e){var t=l(e).parents(".nx-group-field").attr("data-id"),n=l(e).parents('.nx-group-field[data-id="'+t+'"]'),i=l(n.clone()),t=l(e).parents(".nx-group-fields-wrapper").find(".nx-group-field:last"),e=n.parent(),t=l(t).data("id")+1;n.removeClass("open"),i.attr("data-id",t),i.insertAfter(n),l.notificationx.resetFieldIds(e.find(".nx-group-field")),0<l(".nx-countdown-datepicker").length&&l("body .nx-group-field").find(".nx-countdown-datepicker").each(function(e,t){var n=l(t).find("input"),t=n.val();n.flatpickr({enableTime:!0,defaultDate:t,dateFormat:"D, M d, Y h:i K"})})},l.notificationx.resetFieldIds=function(e){var s;e.length<=0||(s=0,e.map(function(e,t){var r=(t=l(t)).data("field-name"),c=t.find(".nx-group-field-info").data("info").group_sub_fields;t.attr("data-id",s),t.find("tr.nx-field").each(function(e,t){var n=(t=l(l(t)[0])).find('[name*="nx_meta_'+r+'"]'),i=n.attr("data-key"),e=c[e].original_name,a=r+"["+s+"]["+e+"]",e="nx-meta-"+a,o="nx_meta_"+a;t.attr("data-id",a),t.attr("id",e),null!=i&&1===n.length?(n.attr("id",o),n.attr("name",o),n.attr("data-key",a)):1<n.length&&n.each(function(e,t){var n;"text"===t.type&&(n=o+"[url]"),"hidden"===t.type&&(n=o+"[id]"),(t=l(t)).attr("id",n),t.attr("name",n),t.attr("data-key",a)})}),s++}))},l.notificationx.initMediaField=function(t){var e=(t=l(t)).parents(".nx-media-field-wrapper"),n=e.find(".nx-media-remove-button"),i=e.find(".nx-thumb-container"),a=e.find(".nx-media-id"),o=e.find(".nx-media-url"),r=wp.media({title:"Upload Photo",button:{text:"Use this photo"},multiple:!1});r.on("select",function(){var e=r.state().get("selection").first().toJSON();i.addClass("nx-has-thumb").append('<img src="'+e.url+'" alt="NotificationX" style="max-width:100%;"/>'),a.val(e.id),o.val(e.url),t.addClass("hidden"),n.removeClass("hidden")}),r.open()},l.notificationx.removeMedia=function(e){var t=(e=l(e)).parents(".nx-media-field-wrapper"),n=t.find(".nx-media-upload-button"),i=t.find(".nx-has-thumb"),a=t.find(".nx-media-id"),t=t.find(".nx-media-url");i.removeClass("nx-has-thumb").find("img").remove(),t.val(""),a.val(""),e.addClass("hidden"),n.removeClass("hidden")},l.notificationx.fieldAlert=function(e){var t=document.createElement("p"),n=document.createElement("a");n.setAttribute("href","https://wpdeveloper.net/in/notificationx-pro"),n.innerText="Premium",n.style.color="red",t.innerHTML="You need to upgrade to the <strong>"+n.outerHTML+" </strong> Version to use this feature",swal({title:"Opps...",content:t,icon:"warning",buttons:[!1,"Close"],dangerMode:!0})},l.notificationx.resetSection=function(e){e=(e=l(e)).parents(".nx-meta-section").find(".nx-meta-field");(window.fieldsss=e).map(function(e,t){var n=(t=l(t)).data("default");t.val(n),t.hasClass("wp-color-picker")&&t.parents(".wp-picker-container").find(".wp-color-result").removeAttr("style"),"nx_meta_border"==t[0].id?t.trigger("click"):t.trigger("change")})},l.notificationx.settingsTab=function(e){var t=(e=l(e)).data("tab");e.addClass("active").siblings().removeClass("active"),l("#nx-"+t).addClass("active").siblings().removeClass("active")},l.notificationx.submitSettings=function(t,e){var n=(t=l(t)).data("key"),i=t.data("nonce"),e=l(e).serializeArray();l.ajax({type:"POST",url:ajaxurl,data:{action:"nx_general_settings",key:n,nonce:i,form_data:e},beforeSend:function(){t.html('<svg id="nx-spinner" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48"><circle cx="24" cy="4" r="4" fill="#fff"/><circle cx="12.19" cy="7.86" r="3.7" fill="#fffbf2"/><circle cx="5.02" cy="17.68" r="3.4" fill="#fef7e4"/><circle cx="5.02" cy="30.32" r="3.1" fill="#fef3d7"/><circle cx="12.19" cy="40.14" r="2.8" fill="#feefc9"/><circle cx="24" cy="44" r="2.5" fill="#feebbc"/><circle cx="35.81" cy="40.14" r="2.2" fill="#fde7af"/><circle cx="42.98" cy="30.32" r="1.9" fill="#fde3a1"/><circle cx="42.98" cy="17.68" r="1.6" fill="#fddf94"/><circle cx="35.81" cy="7.86" r="1.3" fill="#fcdb86"/></svg><span>Saving...</span>')},success:function(e){t.html("Save Settings"),"success"===(e=e.trim())?(swal({title:"Settings Saved!",text:"Click OK to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),l(".nx-save-now").removeClass("nx-save-now")):swal({title:"Settings Not Saved!",text:"Click OK to continue",icon:"error",buttons:[!1,"Ok"]})}})},l.notificationx.template=function(e){l(".nx-meta-template-editable").prop("disabled",!0),l(".nx-meta-template-editable").on("blur",function(){var n,e,t=l(this),i=t[0].innerText.trim().split("\n"),a=[],o=t[0].nextElementSibling.children;if(null!=i)for(var r=0;r<=2;r++){var c,s=i[r]||"";l(o[r]).val(s),""!=s&&(null!=(c=s.match(/\{\{[^\s]*\}\}/g))?(c.forEach(function(e,t){n=(0<t?n:s).replace(e,'<span style="color:red">'+e+"</span>")}),a.push(n)):a.push(s))}e=a.join("<br>"),t.html(e)})},l.notificationx.get_query_vars=function(e){var i={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){i[t]=n}),""!=e?i[e]:i},l.notificationx.testReport=function(){l.ajax({type:"post",url:window.ajaxurl,data:{action:"nx_email_report_test",email:l("#nx_meta_reporting_email").val()},success:function(e){e.success?swal({title:"",text:"Successfully Sent a Test Report in Your Email.",icon:"success",buttons:[!1,"Ok"],timer:2e3}):swal({title:"",text:"Something went wrong regarding sending email.",icon:"error",buttons:[!1,"Ok"],timer:2e3})}})}}(jQuery);